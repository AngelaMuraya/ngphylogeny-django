{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block nav-analysis %}class="active"{% endblock %}
{% block stylesheet %}
{% endblock %}
{% block content %}
<script>
$(function() {
  $(".nav li").on("click", function() {
    $(".nav li").removeClass("active");
    $(this).addClass("active");
    $('.miniworkflow').addClass("hidden");
    $($(this).find('a').attr('href')).removeClass("hidden");
  });
});
</script>
<div class="row row-eq-height">
    <div class="col-sm-3 sidenav ">
            <h4>One Click Workflows</h4>
            <ul class="nav nav-pills nav-stacked">
            {% for workflow in workflow_list|dictsort:"name" %}
                <li {% if forloop.first %}class="active"{%endif%}>
                    <a href="#{{ workflow.slug }}">
                        <span class="glyphicon glyphicon-wheel"></span>
                        {{ workflow.name }}
                    </a>
                </li>
            {% endfor %}
            </ul>
        </div>

   <div class="col-sm-9">
   {% for workflow in workflow_list|dictsort:"name" %}
    <table id="{{ workflow.slug }}" class="table-responsive miniworkflow
           {% if not forloop.first %}hidden{%endif%}" >
        <tr>
        {% for step, tool in workflow.detail  %}
             <td class="d-inline-block">
                 <div class="panel-group">
                    <div class="panel panel-info">
                        <div class="panel-heading">{{ tool.category }}</div>
                        <div class="panel-body">
                            <a data-toggle="collapse" href="#collapse{{ step }}"><span class="glyphicon glyphicon-info-sign"></span></a> {{ tool.name }}
                        </div>
                        <div id="collapse{{ step }}" class="panel-collapse collapse">
                            <div class="panel-footer">
                            {{ tool.description }}
                            </div>
                        </div>
                    </div>
                 </div>
             </td>
            {% if not forloop.last %}
            <td class="d-inline-block align-middle text-center">
                <span class="glyphicon glyphicon-arrow-right"></span>
            </td>
            {% endif %}
        {% endfor %}
        </tr>
    </table>
    {% endfor %}
   </div>
</div>
{% endblock content %}
