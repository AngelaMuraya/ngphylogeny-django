{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block nav-analysis %}class="active"{% endblock %}
{% block stylesheet %}
<script src="{% static 'js/jquery.filer.min.js' %} "></script>
<link rel="stylesheet" href="{% static 'css/jquery.filer.css' %}"/>
<script>
    $(document).ready(function () {
        var myInputFile = $(':file');
        var myInputFilename = myInputFile.attr('name');
        myInputFile.filer({
            showThumbs: true,
            changeInput: true,
        });
        myInputFile.attr({name: myInputFilename});
    });






</script>
{% endblock %}
{% block content %}
<div class="h4 text-center">
    <span class="glyphicon glyphicon-cog"></span>
    {{ workflow.name }}
</div>
<br>
<div class="col-md-2">
</div>

<div class="col-md-8">
    <table id="{{ workflow.slug }}" class="table-responsive">
        <tr>
            <div class="panel panel-info">
                <div class="panel-heading">Input Data</div>
                <div class="panel-body">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input id="id_file" type="file" name="file" required="" multiple="multiple">
                        <input type="submit" name="submit" value="Submit" class="btn btn-primary"
                               id="submit-id-submit">
                    </form>
                </div>
            </div>
        </tr>
        {% for nbstep, step in steps.items %}
        <tr class="d-inline-block text-center">
            <td>
                <span class="glyphicon glyphicon-arrow-down"> </span>
            </td>
        </tr>
        <tr>
            <td class="d-inline-block">
                <div class="panel-group">
                    <div class="panel panel-info">
                        <div class="panel-heading">{{ step.tool.toolflag_set.first|default_if_none:"" }}</div>
                        <div class="panel-body">
                            <a data-toggle="collapse" href="#collapse-{{ nbstep }}-{{ workflow.slug }}">
                                <span class="glyphicon glyphicon-info-sign"></span></a> {{ step.tool.name }}
                        </div>
                        <div id="collapse-{{ nbstep }}-{{ workflow.slug }}" class="panel-collapse collapse">
                            <div class="panel-footer">
                                {{ step.tool.description }}
                            </div>
                        </div>
                        <div class="panel-footer">
                            {{ step.annotation | safe }}
                        </div>
                    </div>
                </div>

            </td>
        </tr>
        {% endfor %}

    </table>
    <br>
    <div class="col-md-9">

    </div>
</div>
</div>
{% endblock content %}
